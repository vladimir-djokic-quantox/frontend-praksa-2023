---
const { category } = Astro.params;
const response = await fetch(`https://dummyjson.com/products/category/${category}`);
const data = await response.json();

import Header from "../../components/Header";
import BackToHomeButton from "../../components/BackButton"

const formatPrice = (price) => {
    return new Intl.NumberFormat("en-US", {
      style: "currency",
      currency: "USD",
    }).format(price);
  };

---

<Header client:only="react" />
<BackToHomeButton/>
<div>
    <h1 class="text-2xl font-bold mb-4">{category.charAt(0).toUpperCase() + category.slice(1)} Products</h1>

    {data.products && data.products.length > 0 ? (
      <ul class="flex gap-3 ">
        {data.products.map((product) => (
          <a href={`/SingleProduct/${product.id}`}>
            <li  class="bg-white p-4 rounded-lg shadow-md w-[300px]">
              <img
                src={product.thumbnail}
                alt={product.title}
                class="w-full h-auto"
              />
              <h4 class="text-xl font-semibold mt-2">{product.title}</h4>
              <div class="brand">
                <span class="text-orange fw-5">Brand:</span>
                <span class="mx-1">{product?.brand}</span>
              </div>
              <div class="vert-line"></div>
              <div class="brand">
                <span class="text-orange fw-5">Category:</span>
                <span class="mx-1 text-capitalize">
                  {product?.category ? product.category.replace("-", " ") : ""}
                </span>
              </div>

              <div class="price">
                <div class="flex align-center">
                  <div class="old-price text-gray">
                    {formatPrice(product?.price)}
                  </div>
                  <span class="fs-14 mx-2 text-dark">
                    Inclusive of all taxes
                  </span>
                </div>
              </div>
            </li>
          </a>
        ))}
      </ul>
    ) : (
      <p>No products available for this category.</p>
    )}
  </div>